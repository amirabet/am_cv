// ===============================================
// SCSS Variables & Configuration
// ===============================================

@use "sass:map";

// Color palette
$colors: (
  "black": #000,
  "white": #fff,
  "gray-dark": #333,
  "gray-medium": #666,
  "gray-light": #aaa,
  "gray-light-b": #ccc,
  "gray-ultralight": #ddd,
  "modal-background": rgba(0, 0, 0, 0.55),
  "selection-bg": #d8d7ba,
  "blue-primary": #3885b8
);

// Breakpoints
$breakpoints: (
  xs: 26em,
  sm: 38em,
  md: 52em
);

// Spacing scale
$spacing: (
  xs: 0.3em,
  sm: 0.6em,
  md: 1em,
  lg: 1.6em,
  xl: 2.4em,
  xxl: 4em
);

// Font sizes
$font-sizes: (
  xs: 0.8em,
  sm: 0.9em,
  base: 1em,
  md: 1.1em,
  lg: 1.4em,
  xl: 2em
);

// ===============================================
// SCSS Functions & Mixins
// ===============================================

// Color function - handles both quoted and unquoted keys
@function color($name) {
  // Try quoted key first
  @if map.has-key($colors, "#{$name}") {
    @return map.get($colors, "#{$name}");
  }
  // Fallback to unquoted key
  @if map.has-key($colors, $name) {
    @return map.get($colors, $name);
  }
  @warn "Color #{$name} not found in color map";
  @return null;
}

// Breakpoint mixin
@mixin breakpoint($size) {
  @if map.has-key($breakpoints, $size) {
    @media (min-width: map.get($breakpoints, $size)) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$size}";
  }
}

// Print media query mixin
@mixin print {
  @media print {
    @content;
  }
}

// Spacing function
@function space($size) {
  @return map.get($spacing, $size);
}

// Font size function (renamed to avoid conflicts)
@function get-font-size($size) {
  @return map.get($font-sizes, $size);
}

// Button mixin
@mixin button(
  $padding: #{space(sm)} #{space(md)},
  $font-size: get-font-size(xs),
  $border-radius: 0px
) {
  display: inline-block;
  cursor: pointer;
  border-radius: $border-radius;
  text-decoration: none;
  padding: $padding;
  font-size: $font-size;
  line-height: 1.2em;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 3px;
  transition: all 0.4s ease-in-out;

  .icon {
    height: 1.2em;
    width: auto;
  }
}

// Button variant mixin
@mixin button-variant(
  $bg-color,
  $text-color,
  $border-color,
  $hover-bg: null,
  $hover-text: null,
  $hover-border: null
) {
  background: $bg-color;
  color: $text-color;
  border: 2px solid $border-color;

  &:hover,
  &:active {
    background: if($hover-bg, $hover-bg, $bg-color);
    color: if($hover-text, $hover-text, $text-color);
    border-color: if($hover-border, $hover-border, $border-color);
  }
}

// Absolute centering mixin
@mixin center-absolute {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// Flexbox centering mixin
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// Text styling mixin
@mixin text-style($size: get-font-size(base), $weight: normal, $color: color(black), $margin: 0) {
  font-size: $size;
  font-weight: $weight;
  color: $color;
  margin: $margin;
}

// Modal mixin
@mixin modal-base {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 999;
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s;

  &:target {
    visibility: visible;
    opacity: 1;
    pointer-events: auto;
  }
}

// ===============================================
// CSS Custom Properties (for browser compatibility)
// ===============================================
:root {
  @each $name, $value in $colors {
    --#{$name}: #{$value};
  }
}

// ===============================================
// Base Styles
// ===============================================
html {
  font-family: monospace;
}

body {
  background: color(gray-ultralight);
  padding: space(sm);
  font-family: monospace;
}

// ===============================================
// Layout
// ===============================================
body > main {
  max-width: 68em;
  margin: 0 auto;
  padding: space(lg);
  background: color(white);
  border: 1px solid color(gray-light-b);
  box-shadow: 3px 3px 3px color(gray-light);
}

body > main > .container > header {
  @include flex-center;
  flex-direction: column;
}

.contact-info {
  color: color(gray-medium);
  font-size: 0.95em;
  margin-bottom: 1em;
}

.contact-info a {
  color: color(blue-primary);
  text-decoration: none;
}

.contact-info a:hover {
  text-decoration: underline;
}

.summary {
  font-size: 1em;
  color: color(gray-medium);
  text-align: justify;
  border-top: 1px solid color(gray-medium);
  border-bottom: 1px solid color(gray-medium);
  padding-bottom: 1em;
  padding-top: 1em;
  margin-bottom: 1em;
}

/* Sections */
section {
  margin-bottom: 2em;
}

/* Job Experience */
.job,
.degree {
  margin-bottom: 1.5em;
}

.job-header,
.degree-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.75em;
}

.job-title,
.degree-title {
  flex: 1;
}

.job-meta,
.degree-meta {
  text-align: right;
  min-width: 16em;
  margin-left: 1.25em;
}

.position,
.degree-name {
  font-weight: 600;
  color: color(gray-medium);
  font-size: 1.05em;
}

.location {
  color: color(gray-medium);
  font-size: 1em;
  margin-bottom: 0.2em;
}

.dates {
  color: color(gray-medium);
  font-size: 0.9em;
  font-style: italic;
}

.degree-details {
  color: color(gray-medium);
  font-size: 0.95em;
  margin-top: 0.5em;
  text-align: justify;
}

/* Lists */
ul {
  list-style-position: outside;
  margin-left: 1.25em;
  margin-top: 0.5em;
}

li {
  margin-bottom: 0.5em;
  text-align: justify;
}

.certifications ul,
.skills ul {
  margin-left: 1.5em;
}

/* Skills */
.skill-group {
  margin-bottom: 1.25em;
}

.skill-group h3 {
  font-size: 1.1em;
  color: color(gray-dark);
  margin-bottom: 0.5em;
}

.skill-group ul {
  margin-left: 1.25em;
}

.skill-group li {
  margin-bottom: 0.4em;
}

/* Responsive Design */
@media screen and (max-width: 768px) {
  .container {
    padding: 1.25em;
  }

  h1 {
    font-size: 2em;
  }

  h2 {
    font-size: 1.5em;
  }

  .job-header,
  .degree-header {
    flex-direction: column;
  }

  .job-meta,
  .degree-meta {
    text-align: left;
    margin-left: 0;
    margin-top: 0.2em;
    min-width: auto;
  }

  .dates {
    margin-top: 0.2em;
  }
}

// ===============================================
// Modal Styles
// ===============================================
.modal-window {
  @include modal-base;
  background-color: color(modal-background);

  > div {
    @include center-absolute;
    width: 420px;
    max-width: 90%;
    padding: space(lg);
    background: color(white);
  }

  header {
    font-weight: bold;
  }

  h1 {
    @include text-style(get-font-size(lg), bold, color(black), 0 0 1em);
  }
}

.modal-close {
  @include text-style(get-font-size(xs), normal, color(gray-light));
  line-height: 50px;
  position: absolute;
  right: 0;
  text-align: center;
  top: 0;
  width: 70px;
  text-decoration: none;

  &:hover {
    color: color(black);
  }
}

// ===============================================
// Typography
// ===============================================
%heading-base {
  margin: 0;
}

h1 {
  @extend %heading-base;
  @include text-style(get-font-size(xl), bold, color(black));
  line-height: 1.2;
}

h2 {
  @extend %heading-base;
  @include text-style(get-font-size(lg), normal, color(gray-medium), 0 0 0.4em 0);
}

h3 {
  @extend %heading-base;
  @include text-style(get-font-size(md), 700, color(black));
  display: inline-block;
}

h4 {
  @extend %heading-base;
  @include text-style(get-font-size(base), normal, color(gray-medium), 0 0 0.4em);
}

h5 {
  @extend %heading-base;
  @include text-style(get-font-size(base), normal, color(black), space(sm) 0 0);
  font-style: italic;
}

h6 {
  @extend %heading-base;
  @include text-style(get-font-size(base), normal, color(black));
}

p {
  margin: 0 0 space(sm) 0;

  header + & {
    margin: 0 0 0.75em 0;
  }
}

// Responsive typography
@include breakpoint(sm) {
  h1 {
    font-size: get-font-size(xl);
  }

  h2 {
    font-size: get-font-size(lg);
    margin: 0 0 0.5em 0;
  }
}

// ===============================================
// Components
// ===============================================

// Buttons
.btn {
  @include button;

  &-mid {
    @include button(#{space(md)} 1.2em, get-font-size(base));
    line-height: 1.5em;

    .btn--icon {
      height: 1.5em;
    }
  }

  &-big {
    @include button(1.2em 1.5em, get-font-size(lg));
    line-height: 2em;

    .btn--icon {
      height: 2em;
    }
  }

  &-light {
    @include button-variant(
      transparent,
      color(gray-medium),
      color(gray-medium),
      color(white),
      color(black)
    );
  }

  &-dark {
    @include button-variant(
      color(gray-dark),
      color(gray-light-b),
      color(gray-dark),
      color(black),
      color(white),
      color(black)
    );
  }
}

// ===============================================
// Animations
// ===============================================

// Typewriter effect
@include breakpoint(sm) {
  .typewriter {
    display: inline-flex;

    span {
      word-break: break-all;
      height: 1.2em;
      width: 0%;
      overflow: hidden;
      animation: typewriter 3s linear 2s 1 normal forwards;

      &:before {
        content: " ";
        display: inline-block;
      }

      &.typewriter--first {
        animation-duration: 2s;
        animation-delay: 1s;
      }
    }
  }
}

@keyframes typewriter {
  90%,
  100% {
    width: 100%;
  }
}

// ===============================================
// Responsive Design
// ===============================================
body > footer {
  max-width: 72em;
  margin: space(lg) auto;
}

@include breakpoint(xs) {
  body {
    padding: 1.2em;

    > main {
      padding: space(xl);
    }

    > footer {
      margin: space(xl) auto;
    }
  }
}

@include breakpoint(sm) {
  body {
    padding: 2em;

    > main {
      padding: space(xxl);
    }

    > footer {
      margin: space(xxl) auto;
    }
  }
}

// ===============================================
// Utility Classes
// ===============================================
.text-center {
  text-align: center;
}
.text-left {
  text-align: left;
}
.text-right {
  text-align: right;
}

// ===============================================
// Selection Styles
// ===============================================
::-moz-selection {
  background: color(selection-bg);
  color: color(black);
}

::selection {
  background: color(selection-bg);
  color: color(black);
}

// ===============================================
// Print Styles
// ===============================================
.only-print {
  display: none;
}

@media print {
  // Page setup
  @page {
    size: auto;
    margin: 0.1in 0.2in;
  }

  // Base styles
  body {
    background: color(white);
    padding: 0;
    font-size: 10pt;
    line-height: 1.2;

    > main {
      width: 100%;
      max-width: auto;
      margin: 0;
      padding: 0;
      border: 0px solid color(white);
    }
  }

  .container {
    box-shadow: none;
    padding: 0;
  }

  a {
    color: color(gray-dark);
    text-decoration: none;
  }

  a[href]:after {
    content: none !important;
  }

  // Typography
  header {
    margin-bottom: 1em;
  }

  h1 {
    font-size: 16pt !important;
    margin-bottom: 0.3em !important;
  }

  h2 {
    font-size: 11pt !important;
    margin: 0.8em 0 0.4em 0 !important;
  }

  h3 {
    font-size: 9.5pt !important;
    margin-bottom: 0.2em !important;
  }

  .summary {
    font-size: 9pt !important;
    padding: 0.6em 0;
    margin-bottom: 0.8em;
  }

  .contact-info {
    font-size: 8.5pt;
    margin-bottom: 0.6em;
  }

  // Layout spacing
  section {
    margin-bottom: 1.2em;
  }

  .job,
  .degree {
    margin-bottom: 0.8em;
  }

  .job-header,
  .degree-header {
    margin-bottom: 0.4em;
  }

  // Job/degree content
  .position,
  .degree-name {
    font-size: 9.75pt;
  }

  .location {
    font-size: 8.5pt;
    margin-bottom: 0.1em;
  }

  .dates {
    font-size: 8pt;
  }

  .degree-details {
    font-size: 8.5pt;
    margin-top: 0.3em;
  }

  // Lists
  ul {
    margin-left: 1em;
    margin-top: 0.3em;
  }

  li {
    margin-bottom: 0.25em;
    font-size: 9pt;
    line-height: 1.25;
  }

  // Skills section
  .skill-group {
    margin-bottom: 0.8em;
  }

  .skill-group h3 {
    font-size: 9.75pt;
    margin-bottom: 0.3em;
  }

  .skill-group ul {
    margin-left: 1em;
  }

  .skill-group li {
    margin-bottom: 0.2em;
    font-size: 8.5pt;
  }

  // Certifications
  .certifications ul {
    margin-left: 1em;
  }

  .certifications li {
    font-size: 8.5pt;
    margin-bottom: 0.2em;
  }

  // Responsive print styles
  @include breakpoint(sm) {
    h1 {
      font-size: get-font-size(xl);
    }

    h2 {
      font-size: get-font-size(lg);
      margin: 0 0 0.5em 0;
    }

    body {
      padding: 2em;

      > main {
        padding: space(xxl);
      }

      > footer {
        margin: space(xxl) auto;
      }
    }
  }

  // Print utilities
  .no-print {
    display: none !important;
  }

  .only-print {
    display: block !important;
  }

  // Animations
  .typewriter span,
  .typewriter--start span {
    width: 100% !important;
  }
}
